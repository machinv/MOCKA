(*!m2pim+mocka*)

(* ------------------------------------------------------------------------ *
 * MOCKA Modula-2 Compiler System, Version 1807                             *
 *                                                                          *
 * Copyright (C) 1988-2000 by                                               *
 *  GMD Gesellschaft fuer Mathematik und Datenverarbeitung,                 *
 *  Ehemalige GMD Forschungsstelle an der Uni Karlsruhe;                    *
 *  [EN] German National Research Center for Computer Science,              *
 *  Former GMD Research Lab at the University of Karlsruhe.                 *
 *                                                                          *
 * Copyright (C) 2001-2018 by                                               *
 *  Fraunhofer-Gesellschaft zur Foerderung der angewandten Forschung;       *
 *  [EN] Fraunhofer Society for the Advancement of Applied Research.        *
 * ------------------------------------------------------------------------ *)

DEFINITION MODULE RegAlloc;

(* ************************************************************************ *
 *                  This module was generated by BEG V1.84                  *
 * ************************************************************************ *)

 FROM IR IMPORT  Expression;
 FROM IR IMPORT MaxPscArity, Register, RegisterSet, MaxScratch;
 IMPORT IR;

(*++++++ start insertion IpTypes ++++++*)

IMPORT CgBase;
FROM Strings	IMPORT	String;


(*------ end   insertion IpTypes ------*)
(******* empty insertion IpRegAlloc_d *******)
 
 TYPE  Action        = (aLr, aRestore);
	Spilllocation = CARDINAL;
 	AllocIndex    = [1..4096];
       AllocDescr    = RECORD 
 	    reg           : Register;
           actionafter   : BOOLEAN;  (* he 08/91 *)
 	    spilllocation : Spilllocation;
           regmove       : Register;  (* he 08/91 *)
 	    op            : ARRAY [1..MaxPscArity] OF Register;
	    scr           : ARRAY [1..MaxScratch] OF Register;
 	    num           : [0..MaxPscArity];
 	    a             : ARRAY [1..MaxPscArity] OF RECORD
 	       CASE action : Action OF
              |   aLr     : regto, regfrom  : Register;
 	       |   aRestore: reg             : Register;
     		             spilllocation   : Spilllocation;
 	       END;
 	    END;
 	 END;
 VAR    ai         : AllocIndex;
        allocation : ARRAY AllocIndex OF AllocDescr;
        UsedReg    : RegisterSet;

 PROCEDURE  RegAllo ( e : Expression; av : RegisterSet );
 
 PROCEDURE  PrintAllocation (i : AllocIndex);
 END RegAlloc.
